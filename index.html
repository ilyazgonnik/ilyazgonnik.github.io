// 1. Пользователь выбирает жанры
const selectedGenres = ['comedy', 'drama'];

// 2. Инициализируем чат с выбранными жанрами
const initResponse = await fetch('/api/chat/start', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ enabled_genres: selectedGenres })
});

// 3. Начинаем общение
const chatResponse = await fetch('/api/chat', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
        enabled_genres: selectedGenres,
        messages: [
            { role: 'user', content: 'Посоветуй хороший фильм' }
        ]
    })
});